
# ๐ผ CUSTOMER RETENTION
![LOGO](https://miro.medium.com/v2/resize:fit:1024/1*WZdoYPpmiIk1AcPQ1YHWug.png)
# ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

ะัะพะตะบั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ะดะปั ัะตัะตะฝะธั ะทะฐะดะฐัะธ ะฟัะตะดัะบะฐะทะฐะฝะธั ะพััะพะบะฐ ะบะปะธะตะฝัะพะฒ ะฝะฐ ะพัะฝะพะฒะต ะดะฐะฝะฝัั ะธะท ััะตะฑะฝะพะณะพ ัะพัะตะฒะฝะพะฒะฐะฝะธั Kaggle. 

ะัะฝะพะฒะฝะฐั ัะตะปั โ ัะพะทะดะฐัั ะผะพะดะตะปั ะผะฐัะธะฝะฝะพะณะพ ะพะฑััะตะฝะธั, ะบะพัะพัะฐั ัะฟะพัะพะฑะฝะฐ ะฟัะพะณะฝะพะทะธัะพะฒะฐัั ะฒะตัะพััะฝะพััั ััะพะดะฐ ะบะปะธะตะฝัะฐ, ััะพ ะฟะพะผะพะณะฐะตั ะฑะธะทะฝะตัั ะฟัะธะฝะธะผะฐัั ัะฒะพะตะฒัะตะผะตะฝะฝัะต ะผะตัั ะดะปั ัะดะตัะถะฐะฝะธั.
 
ะัะธัะธะฐะปัะฝะพะน ะผะตััะธะบะพะน ัะพัะตะฒะฝะพะฒะฐะฝะธั ะฒััััะฟะฐะปะฐ ROC AUC, ะบะพัะพัะฐั ะธัะฟะพะปัะทะพะฒะฐะปะฐัั ะดะปั ะฒัะฑะพัะฐ ะธ ะพัะตะฝะบะธ ะผะพะดะตะปะตะน. ะะดะฝะฐะบะพ ะดะปั ะฟัะฐะบัะธัะตัะบะพะณะพ ะฟัะธะผะตะฝะตะฝะธั ะฒะฐะถะฝะพ ะฝะต ัะพะปัะบะพ ะบะฐัะตััะฒะพ ัะฐะฝะถะธัะพะฒะฐะฝะธั, ะฝะพ ะธ ัะฟะพัะพะฑะฝะพััั ะผะพะดะตะปะธ ะฟัะตะดัะบะฐะทัะฒะฐัั ัะฐะบั ะพััะพะบะฐ. ะะพััะพะผั ะดะพะฟะพะปะฝะธัะตะปัะฝะพ ะฑัะปะฐ ัะฐัััะธัะฐะฝะฐ Fฮฒ-ะผะตัะฐ ั ฮฒ = 2 ะฝะฐ ะฒะฐะปะธะดะฐัะธะพะฝะฝะพะน ะฒัะฑะพัะบะต, ะธ ะฟะพ ะฝะตะน ะฒัะฑัะฐะฝ ะพะฟัะธะผะฐะปัะฝัะน ะฟะพัะพะณ ะฒะตัะพััะฝะพััะธ, ััะพะฑั ะฟะพะฒััะธัั ััะฒััะฒะธัะตะปัะฝะพััั ะผะพะดะตะปะธ (recall) ะธ ะผะธะฝะธะผะธะทะธัะพะฒะฐัั ัะธัะบ ัะฟัััะธัั ะบะปะธะตะฝัะฐ, ัะบะปะพะฝะฝะพะณะพ ะบ ััะพะดั.

ะ ัะฐะผะบะฐั ะฟัะพะตะบัะฐ ัะตะฐะปะธะทะพะฒะฐะฝ ะฟะพะปะฝัะน pipeline: ะพั ะฟัะตะดะฒะฐัะธัะตะปัะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ ะธ ะพะฑัะฐะฑะพัะบะธ ะดะฐะฝะฝัั, ัะตัะตะท ะพะฑััะตะฝะธะต ะธ ะพัะตะฝะบั ะผะพะดะตะปะตะน, ะดะพ ัะฐะทะฒะตัััะฒะฐะฝะธั REST API ะดะปั ะฟะพะปััะตะฝะธั ะฟัะตะดัะบะฐะทะฐะฝะธะน ะธ ะธะฝัะตะณัะฐัะธะธ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั. ะัะพะผะต ัะพะณะพ, ะพะฑะตัะฟะตัะตะฝะพ ะผะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะบะปััะตะฒัั ะบะพะผะฟะพะฝะตะฝัะพะฒ ะดะปั ะฟะพะฒััะตะฝะธั ะฝะฐะดัะถะฝะพััะธ ัะธััะตะผั.
# ะะตะฐะปะธะทะพะฒะฐะฝะพ
- โ **[EDA](notebooks/EDA.ipynb)** ะฒ Jupyter: ะฒััะฒะปะตะฝะธะต ะดัะฑะปะธะบะฐัะพะฒ, ะฒัะฑัะพัะพะฒ ะธ ะดะธัะฑะฐะปะฐะฝั ะบะปะฐัะพะฒ, ะฟะพัััะพะตะฝะธะต ะณัะฐัะธะบะพะฒ ัะฐัะฟัะตะดะตะปะตะฝะธั ะฟัะธะทะฝะฐะบะพะฒ
- โ ะะฑััะตะฝะธะต ะผะพะดะตะปะตะน ั ะพะฟัะธะผะธะทะฐัะธะตะน ROC AUC (ะพัะธัะธะฐะปัะฝะฐั ะผะตััะธะบะฐ ัะพัะตะฒะฝะพะฒะฐะฝะธั)
- โ ะะฟัะธะผะธะทะฐัะธั ะฟะพัะพะณะฐ ะฒะตัะพััะฝะพััะธ ะฝะฐ ะพัะปะพะถะตะฝะฝะพะน ะฒัะฑะพัะบะต ะฟะพ Fฮฒ-ะผะตัะต (ฮฒ = 2)
- โ ะะฑััะตะฝะธะต ะธ ััะฐะฒะฝะตะฝะธะต **[ะผะพะดะตะปะตะน](notebooks/main_model.ipynb)** ะฒ Jupyter: CatBoostClassifier, XGBClassifier, Ensemble 
- โ ะกะพััะฐะฝะตะฝะธะต ะปัััะตะน **[ะผะพะดะตะปะธ](model/best_model.pkl)**
- โ ะะพะดัะปะธ ะดะปั **[ะฟัะตะดะพะฑัะฐะฑะพัะบะธ](src/ML/preprocessing.py)** ะดะฐะฝะฝัั ะธ **[ะฟัะตะดัะบะฐะทะฐะฝะธั](src/ML/predictor.py)** ะฝะฐ ะพัะฝะพะฒะต ัะพััะฐะฝัะฝะฝะพะน ะผะพะดะตะปะธ
- โ ะะตะฐะปะธะทะฐัะธั REST API ั FastAPI: **[ัะพัะบะฐ ะฒัะพะดะฐ](src/api/main.py)**, **[ะผะฐัััััั](src/api/routes.py)** ะธ ะพะฑัะฐะฑะพัะบะฐ POST-ะทะฐะฟัะพัะพะฒ 
- โ ะะพะปะฝะฐั ะฝะฐัััะพะนะบะฐ Docker ะดะปั ะทะฐะฟััะบะฐ API ะธ ะฑะฐะทั ะดะฐะฝะฝัั ะฒ ะธะทะพะปะธัะพะฒะฐะฝะฝะพะน ััะตะดะต
- โ **[ะฎะฝะธั-ัะตััั](tests/unit)** ะดะปั ะฟัะพะฒะตัะบะธ ะบะพััะตะบัะฝะพััะธ ัะฐะฑะพัั ะผะพะดัะปะตะน ะฟัะตะดะพะฑัะฐะฑะพัะบะธ ะธ ะฟัะตะดัะบะฐะทะฐะฝะธั, ะฐ ัะฐะบะถะต ัะธะบััััั ะดะปั ัะตััะพะฒ.
# ะขะตัะฝะพะปะพะณะธะธ ะธ ะธะฝััััะผะตะฝัั

- ๐ Python  
- ๐ Pandas  
- ๐ scikit-learn  
- ๐ป Jupyter Notebook  
- ๐ฑโ๐ CatBoost  
- โก XGBoost  
- ๐ FastAPI  
- ๐ PostgreSQL  
- ๐ณ Docker & Docker Compose  
- ๐งช Pytest  
- ๐ฆ pickle  
- ๐๏ธ Git
# ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```

โโโ data                      # ะััะพะดะฝัะต ะธ ะพะฑัะฐะฑะพัะฐะฝะฝัะต ะดะฐะฝะฝัะต ะดะปั ะพะฑััะตะฝะธั ะธ ะฒะฐะปะธะดะฐัะธะธ
โยย โโโ processed
โยย โยย โโโ data_train.csv    # ะะฑัะฐะฑะพัะฐะฝะฝัะต ะพะฑััะฐััะธะต ะดะฐะฝะฝัะต
โยย โยย โโโ val_train.csv     # ะะฑัะฐะฑะพัะพัะฝัะต ะดะฐะฝะฝัะต ะดะปั ะฒะฐะปะธะดะฐัะธะธ
โยย โโโ raw
โยย โยย โโโ train.csv         # ะกััะพะน ะดะฐัะฐัะตั ะธะท ัะพัะตะฒะฝะพะฒะฐะฝะธั
|   โโโ test
|   |    โโโ test.csv         # ะกััะพะน ะดะฐัะฐัะตั ะธะท ัะพัะตะฒะฝะพะฒะฐะฝะธั
โยย โโโ sample_submission.csv # ะจะฐะฑะปะพะฝ ะดะปั ัะฐะฑะผะธัะฐ
โยย โโโ train.csv.zip         # ะััะธะฒ ะธััะพะดะฝัั ะดะฐะฝะฝัั
โโโ docker-compose.yml        # ะะพะฝัะธะณััะฐัะธั Docker Compose ะดะปั ะทะฐะฟััะบะฐ ัะตัะฒะธัะพะฒ
โโโ Dockerfile                # ะะฝััััะบัะธั ะฟะพ ัะฑะพัะบะต Docker ะพะฑัะฐะทะฐ
โโโ models                    # ะกะพััะฐะฝัะฝะฝัะต ะพะฑััะตะฝะฝัะต ะผะพะดะตะปะธ
โยย โโโ best_model.pkl        # ะัััะฐั ะผะพะดะตะปั ะฟะพัะปะต ะพะฑััะตะฝะธั
|   โโโ best_treshold.json    # ะัััะธะน ะฟะพัะพะณ ะฟัะตะดัะบะฐะทะฐะฝะธั
โโโ notebooks                 # Jupyter ะฝะพััะฑัะบะธ ั ะฐะฝะฐะปะธะทะพะผ ะธ ะพะฑััะตะฝะธะตะผ ะผะพะดะตะปะตะน
โยย โโโ EDA.ipynb             # ะััะปะตะดะพะฒะฐัะตะปััะบะธะน ะฐะฝะฐะปะธะท ะดะฐะฝะฝัั
โยย โโโ main_model.ipynb      # ะะฑััะตะฝะธะต ะธ ััะฐะฒะฝะตะฝะธะต ะผะพะดะตะปะตะน
โยย โโโ models.ipynb          # ะััะปะตะดะพะฒะฐะฝะธะต ะผะพะดะตะปะตะน
โยย โโโ README.md             # ะะฟะธัะฐะฝะธะต ัะพะดะตัะถะธะผะพะณะพ ะฝะพััะฑัะบะพะฒ
โโโ processed                 # (ะฟัััะฐั ะธะปะธ ะดะปั ะดะพะฟะพะปะฝะธัะตะปัะฝัั ะพะฑัะฐะฑะพัะฐะฝะฝัั ะดะฐะฝะฝัั)
โโโ requirements.txt          # ะะฐะฒะธัะธะผะพััะธ Python ะฟัะพะตะบัะฐ
โโโ src                       # ะััะพะดะฝัะน ะบะพะด ะฟัะพะตะบัะฐ
    โโโ api                  # ะะตะฐะปะธะทะฐัะธั REST API ะฝะฐ FastAPI
    โยย โโโ main.py          # ะขะพัะบะฐ ะฒัะพะดะฐ API ะฟัะธะปะพะถะตะฝะธั
    โยย โโโ routes.py        # ะะฑัะฐะฑะพััะธะบะธ HTTP-ะทะฐะฟัะพัะพะฒ
    โโโ database             # ะะฐะฑะพัะฐ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั
    โยย โโโ connection.py    # ะะพะดะบะปััะตะฝะธะต ะบ ะฑะฐะทะต ะดะฐะฝะฝัั
    โยย โโโ crud.py          # ะะฟะตัะฐัะธะธ CRUD ั ะดะฐะฝะฝัะผะธ
    โยย โโโ init.sql         # ะกะบัะธะฟั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ ะฑะฐะทั
    โยย โโโ tables.py        # ะะฟะธัะฐะฝะธะต ัะฐะฑะปะธั ะฑะฐะทั ะดะฐะฝะฝัั
    โโโ ML                   # ะะพะดัะปะธ ะผะฐัะธะฝะฝะพะณะพ ะพะฑััะตะฝะธั
    โยย โโโ predictor.py     # ะะพะณะธะบะฐ ะฟัะตะดัะบะฐะทะฐะฝะธั ะฝะฐ ะพัะฝะพะฒะต ะผะพะดะตะปะธ
    โยย โโโ preprocessing.py # ะัะตะดะพะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั ะฟะตัะตะด ะพะฑััะตะฝะธะตะผ ะธ ะฟัะตะดัะบะฐะทะฐะฝะธะตะผ
    โโโ tests                # ะขะตััั ะฟัะพะตะบัะฐ
        โโโ fixtures.py      # ะคะธะบััััั ะดะปั ัะตััะพะฒ (ะฟะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั)
        โโโ unit             # ะฎะฝะธั-ัะตััั ะดะปั ะบะปััะตะฒัั ะผะพะดัะปะตะน
            โโโ test_predictor.py      # ะขะตััั ะดะปั ะผะพะดัะปั ะฟัะตะดัะบะฐะทะฐะฝะธั
            โโโ test_preprocessing.py  # ะขะตััั ะดะปั ะผะพะดัะปั ะฟัะตะดะพะฑัะฐะฑะพัะบะธ

```
# ะะฝััััะบะธัั ะทะฐะฟััะบะฐ
**ะะะะะะะะะขะะะฌะะซะ ะขะะะะะะะะะฏ**
- ะฃััะฐะฝะพะฒะปะตะฝ Docker: https://docs.docker.com/engine/install/

**1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน ะธ ะฟะตัะตะนะดะธัะต ะฒ ะฟะฐะฟะบั ะฟัะพะตะบัะฐ:**
```bash
git clone https://github.com/Naraqqq/client_retention_prediction
cd client_retention_prediction
```
**2.  ะฃะฑะตะดะธัะตัั, ััะพ ะฒ ะฟะฐะฟะบะต [data/raw/](data/raw) ะฝะฐัะพะดะธััั ัะฐะนะป train.csv (ะธััะพะดะฝัะต ะดะฐะฝะฝัะต)**

**3.  ะะฐะฟัััะธัะต ะฟัะพะตะบั ัะตัะตะท Docker Compose:**
```bash
docker-compose up --build
```
**4. ะัะพะฒะตัััะต ัะฐะฑะพัั API ะฒ SwaggerUI**
- http://localhost:8000/docs
- customerid ะผะพะถะตัะต ะฝะฐะนัะธ ะฒ ัะตััะพะฒะพะผ [ัะฐะนะปะต](data/test), ะบะพัะพััะน ะฝัะถะฝะพ ะพัะบัััั ะธะปะธ ัะตัะตะท excel, ะธะปะธ ัะตัะตะท pandas
